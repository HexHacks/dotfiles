
function config_keybindings_emacs()
{
    bindkey -e
}

function config_keybindings_vim()
{

}

function config_completion()
{
    zstyle ':completion:*' completer _correct _complete _ignored _approximate
    zstyle ':completion:*' format 'Completing %d'
    zstyle ':completion:*' group-name ''
    zstyle ':completion:*' matcher-list 'm:{[:lower:]}={[:upper:]} m:{[:lower:][:upper:]}={[:upper:][:lower:]}' 'l:|=* r:|=*' 'r:|[._-]=** r:|=**'
    zstyle ':completion:*' max-errors 3 numeric
    zstyle ':completion:*' prompt 'Error: %e'
    zstyle ':completion:*' verbose true
    zstyle :compinstall filename '/home/jacob/.zshrc'

    autoload -Uz compinit
    compinit
}

function config_prompt()
{
    autoload -Uz promptinit
    autoload -Uz colors
    promptinit

    # Left prompt
    PS1='%B%(?..%F{red}[%F{white}%?%F{red}] )' # status code: %?
    PS1+='%F{fg_default_code}%b%n' # username
    PS1+='%F{magenta}@' # separator
    PS1+='%F{cyan}%m%u' # hostname
    PS1+='%F{red}# %F{fg_default_code}'
    export PS1

    # Right prompt
    export RPS1='%F{green}%~%f' 
}

function config_history()
{
    setopt inc_append_history       # immediately append history to history file
    setopt hist_ignore_dups         # ignore duplicate commands
    setopt hist_ignore_space        # ignore commands with leading space
}

function config_aliases() 
{
    alias -g ...='../..'
    alias -g ....='../../..'
    alias -g .....='../../../..'

    # I want colors for my standard operations.
    alias ls='ls --color=auto'
    alias grep='grep --color=auto'

    alias ga='git add'
    alias gs='git status'
    alias gd='git diff'
    alias gl='git log --oneline'
    alias glp='git log --pretty="format:%h (%an, %ad): %s" --date=short'
    alias gc='git commit --verbose'
}

setopt extendedglob

config_keybindings_emacs
config_completion
config_prompt
config_history
config_aliases

## TODO: Move me to systemd
# If running trom tty1 start sway
if [[ $(tty) == "/dev/tty1" ]]; then
    sway
    #exit 0
fi
